1998-08-28 22:49  Ulrich Drepper  <drepper@cygnus.com>

	* elf/do-rel.h (elf_dynamic_do_rel): Call elf_machine_lazy_rel
	with load address, not map address.
	* sysdeps/alpha/dl-machine.h (elf_machine_lazy_rel): Change first
	parameter and use this value.
	* sysdeps/arm/dl-machine.h: Likewise.
	* sysdeps/i386/dl-machine.h: Likewise.
	* sysdeps/m68k/dl-machine.h: Likewise.
	* sysdeps/mips/dl-machine.h (elf_machine_lazy_rel): Change first
	parameter.
	* sysdeps/powerpc/dl-machine.h: Likewise
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise

1998-08-28 09:22  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (process_envvars): Fix copy&paste error.

	* malloc/malloc.c (malloc_hook_ini): Don't overwrite realloc and
	memalign hook.
	(realloc_hook_ini): Don't overwrite memalign hook.
	(memalign_hook_ini): Don't overwrite malloc and memalign hooks.
	Reported by Philippe Troin <phil@fifi.org>.

	* malloc/mcheck.c (mprobe): Call checkhdr with adjusted pointer.
	Patch by Philippe Troin <phil@fifi.org>.

1998-08-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/segfault.c (install_handler): Protect the
	non-POSIX signals with #ifdef.
	(catch_segfault): Add missing mode parameter for open.
	* debug/catchsegv.sh: Avoid termination message from shell.  Allow
	other termination signals.

1998-08-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* debug/Makefile (distribute): Add register-dump.h.

1998-08-28 10:41  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/register-dump.h: New file.

1998-08-27 19:42  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile (distribute): Add dl-origin.h.
	* sysdeps/generic/dl-origin.h: New file.
	* sysdeps/unix/sysv/linux/dl-origin.h: New file.
	* elf/link.h (struct link_map): Add l_origin field.
	* elf/dl-load.c (expand_dynamic_string_token): New function.
	(decompose_path): Remove WHERE argument, take link map pointer instead.
	Call expand_dynamic_string_token instead of local_strdup to make copy
	of rpath.
	(_dl_init_paths): Call decompose_path with correct argument.
	(_dl_map_object_from_fd): Define static is EXTERNAL_MAP_FROM_FD is
	not defined.
	Check EI_OSABI and EI_ABIVERSION fields in header.
	Call _dl_new_object with extra argument.
	(_dl_map_object): Call decompose_path with correct argument.
	Call expand_dynamic_string_token instead of local_strdup to also
	expand DST.
	Call _dl_new_object with extra argument.
	* elf/dl-object.c (_dl_new_object): Determine l_origin for all maps
	but the main one if new argument is nonzero.
	* elf/ldsodefs.h: Adjust for _dl_new_object change.
	* elf/dl-support.c: Define _dl_origin_path.
	* elf/rtld.c: Likewise.  Set _dl_origin_path based on LD_ORIGIN_PATH.
	(dl_main): Call _dl_new_object with extra argument.

	* elf/dl-close (_dl_close): Free l_name and l_origin.

	* sysdeps/i386/useldt.h (THREAD_GETMEM, THREAD_SETMEM): Use P
	modifier in asm, not c.

	* sysdeps/mach/hurd/Makefile [subdirs==elf]: Define CFLAGS-dl-load.c
	to -DEXTERNAL_MAP_FROM_FD to make _dl_map_object_from_fd extern.

1998-08-26 17:48  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Move map->l_nsearchlist value into local
	variable so that map can be freed.
	Reported by Philippe Troin <phil@fifi.org>.

	* elf/dl-open.c (dl_open_worker): Correct test for extending global
	scope array.
	Patch by Philippe Troin <phil@fifi.org>.

1998-08-26  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/register-dump.h: Rewrite.  Much nicer this way.
	Don't call writev() with a 100-element vector.
	* sysdeps/generic/segfault.c (catch_segfault): Skip top-level NULL
	return address.

	* sysdeps/powerpc/elf/libc-start.c: Sync up with generic version.
	In particular, set __libc_stack_end.
	* sysdeps/powerpc/elf/start.S: Allow _init and _fini to be
	undefined.  Fix copyright notice.

1998-08-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/Makefile (gmp-objs): New variable.
	($(objpfx)atest-exp, $(objpfx)atest-sincos, $(objpfx)atest-exp2):
	Depend on it.
	(tests): Add atest-exp atest-sincos atest-exp2.
	(tests-static): Remove atest-exp atest-sincos atest-exp2.

1998-08-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-cache.c: Move static variable cache and cachesize
	to toplevel.
	(_dl_unload_cache): New function.
	* elf/Versions [libc GLIBC_2.1]: Add _dl_unload_cache.
	* elf/dl-open.c (_dl_open): Unload map file before freeing the lock.
	* elf/rtld.c (dl_main): Unload map file before jumping to user code.

	* sysdeps/unix/sysv/linux/alpha/bits/fcntl.h: Define O_DIRECT.
	Correct comment for O_LARGEFILE.
	* sysdeps/unix/sysv/linux/bits/fcntl.h: Define O_DIRECT.
	Change O_LARGEFILE to correct value.

1998-08-25 14:34  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iogetline.c (_IO_getline_info): Don't read anything for
	N == 0.  Patch by HJ Lu.

1998-08-25 11:43  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add syminfo stuff and other DT_* from Solaris' ELF.

1998-08-25  Bernd Schmidt  <crux@Pool.Informatik.RWTH-Aachen.DE>

	* argp/argp.h: Use __inline__ not inline.

	* sysdeps/i386/bits/select.h (FD_ZERO): Rewrite asm not to indicate
	an input register as being clobbered.
	* sysdeps/i386/memset.c (memset): Likewise.
	* sysdeps/i386/bzero.c (__bzero): Likewise.
	* sysdeps/i386/memcopy.h ({BYTE,WORD}_COPY_[FB]WD): Likewise.

1998-08-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdlib/jrand48_r.c (__jrand48_r): Set also upper half of result.
	Fixes PR libc/757 (Reported by Michael Creutz <creutz@bnl.gov).

1998-08-24 16:34  Ulrich Drepper  <drepper@cygnus.com>

	* debug/catchsegv.sh: Handle text preceding backtrace better.
	* sysdeps/generic/segfault.c: Allow register dump.  Allow handler
	to be installed for other signals than SIGSEGV.
	* sysdeps/generic/register-dump.h: New file.
	* sysdeps/i386/register-dump.h: New file.
	* sysdeps/powerpc/register-dump.h: New file.

	* sysdeps/unix/sysv/linux/i386/profil-counter.h: Use macros from
	sigcontextinfo.h.
	* sysdeps/unix/sysv/linux/powerpc/profil-counter.h: Use i386 version.

1998-08-24  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/unix/sysv/linux/powerpc/sigcontextinfo.h: New file.

1998-08-09  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/unix/sysv/linux/powerpc/chown.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/lchown.S: New file.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Add chown, remove
	getresuid, getresgid.

1998-08-16  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/unix/sysv/linux/powerpc/clone.S: Fix bugs.  Set up stack
	pointer in userland.

1998-08-21  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sys/mount.h (MNT_FORCE): Define as enum
	and fix value.

1998-08-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/ldd.bash.in: Add missing quotes around $file.  Make loop
	over arguments Bourne shell compatible.  Don't exit unsuccessfully
	if nonelf returns successfully.  Avoid duplicating most of the
	script.
	* sysdeps/unix/sysv/linux/ldd-rewrite.sed: Add missing quotes
	around $file.

1998-08-24 10:37  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/Makefile (sysdep_headers): Add
	sys/reg.h.
	* sysdeps/unix/sysv/linux/m68k/sys/reg.h: New file.
	* sysdeps/unix/sysv/linux/m68k/Dist: Distribute it.

1998-08-23  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/Versions [GLIBC_2.1]: Add
	__modify_ldt and modify_ldt.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add modify_ldt.

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Use orl $-1 instead of movl $-1 to save two bytes.
	* sysdeps/unix/sysv/linux/i386/i686/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

1998-08-17  H.J. Lu  <hjl@gnu.org>

	* libio/Versions (_IO_do_write, _IO_file_attach,
	_IO_file_close_it, _IO_file_finish, _IO_file_fopen,
	_IO_file_init, _IO_file_overflow, _IO_file_seekoff,
	_IO_file_setbuf, _IO_file_sync, _IO_file_underflow,
	_IO_file_write, _IO_file_xsputn): Added to GLIBC_2.1.

	* libio/fileops.c (_IO_do_write, _IO_file_attach,
	_IO_file_close_it, _IO_file_finish, _IO_file_fopen,
	_IO_file_init, _IO_file_overflow, _IO_file_seekoff,
	_IO_file_setbuf, _IO_file_sync, _IO_file_underflow,
	_IO_file_write, _IO_file_xsputn): Change the prefix to
	"_IO_new_". Added to GLIBC_2.1.

	* libio/libioP.h (_IO_do_write, _IO_file_attach,
	_IO_file_close_it, _IO_file_finish, _IO_file_fopen,
	_IO_file_init, _IO_file_overflow, _IO_file_seekoff,
	_IO_file_setbuf, _IO_file_sync, _IO_file_underflow,
	_IO_file_write, _IO_file_xsputn): Add prototypes for the prefix
	"_IO_new_".

	* libio/oldfileops.c (_IO_do_write, _IO_file_attach,
	_IO_file_close_it, _IO_file_finish, _IO_file_fopen,
	_IO_file_init, _IO_file_overflow, _IO_file_seekoff,
	_IO_file_setbuf, _IO_file_sync, _IO_file_underflow,
	_IO_file_write, _IO_file_xsputn): Added to GLIBC_2.0.

1998-08-23  Richard Henderson  <rth@cygnus.com>

	* Makeconfig (LDFLAGS): Remove.

	* csu/initfini.c: Return to .text before __gmon_start__.

	* elf/elf.h (EM_FAKE_ALPHA): Rename from EM_OLD_ALPHA.
	(STO_MIPS_*): Rename from STO_*.
	(STB_MIPS_SPLIT_COMMON): Rename from STB_SPLIT_COMMON.
	(STO_ALPHA_NOPV, STO_ALPHA_STD_GPLOAD): New.

	* math/atest-exp.c (mpn_bitsize): Fix bit location calculation.
	(main): e3s is negative on zero.
	* math/atest-exp2.c: Likewise.
	* math/atest-sincos.c: Likewise.

1998-08-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makerules (install): Add comment about absolute paths.

1998-08-23  Ulrich Drepper  <drepper@cygnus.com>

	* libio/vsnprintf.c (_IO_vsnprintf): Set first byte of destination
	array to NUL to handle maxlen==1 case correctly.
	Patch by HJ Lu.

1998-08-23  Richard Henderson  <rth@cygnus.com>

	* sysdeps/alpha/elf/crtbegin.S: Fix .prologue; no pv used.
	* sysdeps/alpha/elf/crtend.S: Likewise.
	* sysdeps/alpha/elf/start.S: Likewise.

	* sysdeps/unix/sysv/linux/alpha/rt_sigaction.S: Fix .prologue;
	non-standard pv usage.

	* sysdeps/unix/sysv/linux/alpha/brk.S: Use jmp macro for relaxation.
	* sysdeps/unix/sysv/linux/alpha/getitimer.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/getrusage.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/gettimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/ieee_get_fp_control.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/ieee_set_fp_control.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/select.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/setitimer.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/settimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/utimes.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/wait4.S: Likewise.

	* sysdeps/alpha/fpu/e_sqrt.c: Use the asm version when the input is
	a finite non-denormal, deferring to the full IEEE version otherwise.

	* sysdeps/alpha/fpu/bits/mathinline.h (__floorf, __floor):
	Early out for -0.  Optimize for !_IEEE_FP_INEXACT.
	* sysdeps/alpha/fpu/s_floor.c: New.
	* sysdeps/alpha/fpu/s_floorf.c: New.
	* sysdeps/alpha/fpu/s_ceil.c: New.
	* sysdeps/alpha/fpu/s_ceilf.c: New.

1998-08-22  Philip Blundell  <philb@gnu.org>

	* sysdeps/arm/bits/string.h: New file.

1998-08-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/configure.in: Obey --with-headers,
	document it.

	* sysdeps/unix/sysv/linux/alpha/configure.in: New file, contains
	test for recent Linux 2.1.100+ headers.

1998-08-21  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-initgroups.c: Optimize NIS query.

1998-08-21 17:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/glob64.c: Define __stat using __xstat64.

1998-08-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (elf/ldso_install): Put back.  The problem still persists.
	* elf/Makefile (ldso_install): Likewise.

1998-08-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* db2/db/db.c (db_open) [_LIBC]: Rename to __nss_db_open and
	create weak alias.
	* include/db.h: Declare __nss_db_open.
	* db2/Versions: Export it.

	* db2/makedb.c: Convert to use db2 API.
	* nss/nss_db/db-XXX.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-alias.c: Likewise.
	(_nss_db_getaliasent_r): Allow retrying with a larger buffer.

1998-08-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Remove
	sys_setresuid, already built automatically (or not).
	* sysdeps/unix/sysv/linux/syscalls.list: Define __setresuid
	instead of __syscall_setresuid and add back setresuid.
	* sysdeps/unix/sysv/linux/seteuid.c: Use __setresuid instead of
	__syscall_setresuid.

1998-08-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sys/mount.h: Fix typo.

1998-08-20  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile (sh-ldd-rewrite): Remove expression to remove
	BASH-ONLY marked region.
	* elf/ldd.bash.in: Remove special BASH-ONLY markers.

1998-02-20 17:54  H.J. Lu  <hjl@gnu.org>

	* libio/oldfileops.c (_IO_file_seekoff): Don't adjust pointers if
	_IO_SYSSEEK fails.

	* libio/iolibio.h (_IO_pos_BAD): Define of type _IO_fpos64_t.

	* libio/libioP.h (FILEBUF_LITERAL): Also initialize new _offset
	element.

1998-08-21  Roland McGrath  <roland@baalperazim.frob.com>

	* elf/ldd.bash.in (TEXTDOMAIN, TEXTDOMAINDIR): Surround setting these
	with magic comments ###BASH-ONLY and ###END-BASH-ONLY.
	* elf/Makefile ($(objpfx)ldd): Generate always from ldd.bash.in.
	(common-ldd-rewrite): New variable, old contents of $(sh-ldd-rewrite).
	(sh-ldd-rewrite): Use that, add cmds to remove code surrounded by
	those magic comments, and to use /bin/sh for @BASH@.
	(bash-ldd-rewrite): Use $(common-ldd-rewrite).
	* elf/ldd.sh.in: File removed.

1998-08-20 20:07  Ulrich Drepper  <drepper@cygnus.com>

	* pwd/getpw.c (__getpw): Use %lu for uid and gid parameter and
	cast them to unsigned long int.
	* pwd/putpwent.c (putpwent): Likewise.
	Patch by John Tobey <jtobey@banta-im.com>.

1998-08-20 17:14  H.J. Lu  <hjl@gnu.org>

	* libio/libioP.h (FILEBUF_LITERAL): Set the _offset field to
	_IO_pos_BAD.

1998-02-20 17:54  H.J. Lu  <hjl@gnu.org>

	* libio/fileops.c (_IO_file_seekoff): Don't adjust pointers if
	_IO_SYSSEEK fails.

1998-08-20 19:14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Makefile [subdirs=misc] (sysdeps_routines):
	Add umount and umount2.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove umount.
	* sysdeps/unix/sysv/linux/umount.S: New file.
	* sysdeps/unix/sysv/linux/umount2.S: New file.
	* sysdeps/unix/sysv/linux/sys/mount.h: Declare umount2.
	Define MNT_FORCE.

	* sysdeps/unix/sysv/linux/Makefile [subdirs=misc] (sysdep_headers):
	Add sys/sendfile.h.
	* sysdeps/unix/sysv/linux/syscalls.list: Add sendfile.
	* sysdeps/unix/sysv/linux/sys/sendfile.h: New file.

	* sysdeps/unix/sysv/linux/sys/acct.h: Pretty print.

	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.1]: Add umount2 and
	sendfile.

1998-08-20 16:01  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldd.sh.in: Redirect warnings and error messages to stderr.
	* elf/ldd.bash.in: Likewise.

	* elf/sln.c: Avoid warning for no main prototype.

	* sysdeps/unix/sysv/linux/alpha/bits/fcntl.h: Remove O_READ and
	O_WRITE.
	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.

	* sysdeps/unix/sysv/linux/alpha/bits/fcntl.h: Add F_SETSIG and
	F_GETSIG.
	* sysdeps/unix/sysv/linux/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.

1998-08-20  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/arm/fpu/ieee754.h: Move to...
	* sysdeps/arm/ieee754.h: ... here.

	* sysdeps/arm/__longjmp.S: Put return value in correct register.
	Don't set the condition flags unnecessarily.
	* sysdeps/arm/fpu/__longjmp.S: Likewise.  Restore floating point
	registers correctly.

	* sysdeps/arm/dl-machine.h: Fix problems with profiling code
	(patch from Scott Bambrough).

	* sysdeps/arm/sysdep.h (CALL_MCOUNT): Add missing semicolons.

	* csu/initfini.c (_init): Don't check whether __gmon_start__ is
	NULL, just call it unconditionally.
	(__gmon_start__): Provide stub version as a weak symbol.

1998-07-30  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/init-first.h: New file (from patch
	by Scott Bambrough)

	* sysdeps/unix/sysv/linux/arm/errlist.c: New file; ARM tools don't
	like `@' in .type directives.

	* sysdeps/arm/bsd-setjmp.S: Use PLT for procedure call.
	* sysdeps/arm/bsd-_setjmp.S: Likewise.

	* sysdeps/arm/dl-machine.h: Set __libc_stack_end.

1998-08-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h (F_SETOWN): Correct value.
	(F_GETOWN): Likewise.

	* sysdeps/unix/sysv/linux/bits/siginfo.h (SI_SIGIO): Add it (from
	Linux 2.1.117).

1998-08-20  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c [_LIBC]: Define __stat only if not
	already defined.

1998-08-18  Ulrich Drepper  <drepper@cygnus.com>

	* include/features.h: Define __USE_EXTERN_INLINES for recent
	enough gcc.
	* argp/argp.h: Define extern inline functions only if
	__USE_EXTERN_INLINES is defined.
	* libio/stdio.h: Likewise.
	* math/math.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* string/argz.h: Likewise.
	* sysdeps/generic/bits/sigset.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigset.h: Likewise.
	* sysdeps/unix/sysv/sysv4/bits/sigset.h: Likewise.
	* sysdeps/wordsize-32/inttypes.h: Likewise.
	* sysdeps/wordsize-64/inttypes.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

	* sysdeps/generic/bits/glob.c [_LIBC]: Define __stat using __xstat
	to allow compilation without optimization.

1998-08-14  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: Set errno to ENOENT if we have no
	more entries.
	* nis/nss_compat/compat-initgroups.c: Likewise.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nis/nss_nis/nis-alias.c: Likewise.
	* nis/nss_nis/nis-ethers.c: Likewise.
	* nis/nss_nis/nis-grp.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-initgroups.c: Likewise.
	* nis/nss_nis/nis-network.c: Likewise.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-pwd.c: Likewise.
	* nis/nss_nis/nis-rpc.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise.
	* nis/nss_nis/nis-spwd.c: Likewise.

	* nis/rpcsvc/yp.h: Generate new without 1024 byte limits.

	* nis/ypclnt.c: Try binding dir only first time, could be to old.

	* nis/yp_xdr.c: Remove 1024 byte limit.
	* nis/ypupdate_xdr.c: Likewise.

	* nis/nss_nis/nis-publickey.c: Make sure, nobody could send
	wrong data.

1998-08-18  Roland McGrath  <roland@baalperazim.frob.com>

	* Rules (binaries-static, binaries-shared static pattern rules):
	Depend on lib%, not just libc%, from $(link-libc{,-static}).

	* sysdeps/mach/hurd/Makefile (link-libc-static): New variable; set
	this here, overriding Makeconfig generic value so we link against
	the RPC libs.

1998-08-17  Ulrich Drepper  <drepper@cygnus.com>

	* posix/tstgetopt.c (options): Add NULL entry at end
	Patch by Adrian Miranda <ade@psg.com>.

1998-08-15 18:21  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add EI_OSABI, ELFOSABI*, and EI_ABIVERSION.  Move EI_PAD
	to 9.

1998-08-15 14:11  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add PPC Diab relocations.

	* malloc/Makefile (libmcheck.a): Use $(LN_S) not ln.

1998-08-14 10:08  Ulrich Drepper  <drepper@cygnus.com>

	* manual/texinfo.tex: Update.

1998-08-07  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/backtrace.c: New file.

1998-08-14  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/arm/fpu/setjmp.S: Correct value of R0 before calling
	sigjmp_save.
	* sysdeps/arm/elf/setjmp.S: Obsolete, deleted.

1998-08-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (install-symbolic-link): Fix spelling.

1998-08-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/elf.h (SHT_HIOS): Fix value.

1998-08-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/regex.c (WIDE_CHAR_SUPPORT): Don't generate defined as
	part of the expansion, this is undefined by the standard.

1998-08-13 19:41  Ulrich Drepper  <drepper@cygnus.com>

	* posix/getconf.c: Add support for systems with incomplete confname.h.

	* sysdeps/posix/sigset.c: Allow SIG_HOLD being undefined.

	* sysdeps/posix/wait3.c: Make it work.

1998-08-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makefile ($(inst_slibdir)/libc-$(version).so): Remove.
	(elf/ldso_install): Remove.

	* elf/Makefile (distribute): Add sln.c.
	(others): Add sln.
	(others-static): Add sln.
	(install-rootsbin): Add sln.
	(others-static): Add sln.
	(ldso_install): Remove.

1998-07-24 10:58  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (install-clean-symbolic-link-list): Make phony.
	* Makefile (install-symbolic-link): Make phony.  Depend on
	subdir_install for parallel makes.


1998-07-22  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile (distribute): Add sln.c

1998-07-21 07:10  H.J. Lu  <hjl@gnu.org>

	* elf/sln.c: New file.

	* Makerules (symbolic-link-prog, symbolic-link-list): New macros.
	(install-clean-symbolic-link-list): New target.
	(install): Depend on install-clean-symbolic-link-list.
	(make-shlib-link): Changed for $(symbolic-link-list).

	* Makefile (install-symbolic-link): New target.
	(install): Depend on install-symbolic-link.

1998-08-12 17:03  Ulrich Drepper  <drepper@cygnus.com>

	* include/unistd.h: Protect against multiple inclusion.

	* posix/glob.c: Don't define __glob_pattern_p is NO_GLOB_PATTERN_P
	is defined, not is glob is defined.
	* sysdeps/unix/sysv/linux/glob64.c: Define NO_GLOB_PATTERN_P.

1998-08-01 17:18  H.J. Lu  <hjl@gnu.org>

	* sunrpc/rpcsvc/rusers.x (xdr_utmp): Use xdr_bytes instead of
	xdr_string for ut_line, ut_name and ut_host.

1998-08-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/paths.h (_PATH_MAILDIR): Change to
	/var/mail in accordance with FHS 2.0.
	Reported by Javier Kohen <root@jkohen.tough.com.ar> [PR libc/639].

1998-08-12  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (recvmsg, sendmsg):
	Update aliases for cancelation.

	* sysdeps/unix/sysv/linux/alpha/glob.c: Undef glob*64 before
	playing with symbol versions.

1998-08-12  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/bits/posix_opt.h: Rewritten with comments and
	multiple inclusion protection.
	(_POSIX_SYNCHRONIZED_IO, _POSIX_FSYNC, _POSIX_MAPPED_FILES,
	_POSIX_MEMORY_PROTECTION, _POSIX_POLL, _POSIX_SELECT): New macros,
	define all these to 1.
	(_POSIX_SYNC_IO): Add #undef, to remind us that pathconf reports it.

1998-08-12  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/usleep.c: Include <unistd.h>.
	(usleep): Return void.

1998-08-11  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/if_index.c (struct if_freenameindex): Add forward
	decl to inhibit warning in if_freenameindex defn.

	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Remove unused variable.

	* sysdeps/mach/hurd/getdomain.c (getdomainname): Renamed from __ name.

	* sysdeps/mach/hurd/reboot.c: Include <sys/reboot.h>.
	* sysdeps/mach/hurd/getdents.c: Include <unistd.h>.
	* sysdeps/mach/hurd/sbrk.c: Include <unistd.h>.
	* sysdeps/mach/usleep.c: Likewise.

	* sysdeps/mach/hurd/bind.c (bind): Add a const.

	* sysdeps/mach/hurd/getdents.c (__getdirentries): Use prototype defn.
	* sysdeps/unix/bsd/init-posix.c (__init_posix): Likewise.
	* sysdeps/unix/bsd/times.c (timeval_to_clock_t): Likewise.
	* sysdeps/mach/hurd/reboot.c (reboot): Likewise.
	* sysdeps/mach/usleep.c (usleep): Likewise.
	* sysdeps/mach/hurd/chflags.c (chflags): Likewise.
	* sysdeps/mach/hurd/fchflags.c (fchflags): Likewise.
	* sysdeps/mach/hurd/sbrk.c (__sbrk): Likewise.
	* sysdeps/mach/hurd/stdio_init.c (__stdio_init_stream): Likewise.

1998-08-11  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/glob64.c: Include <sys/types.h>, <glob.h>, <errno.h>.
	(glob64): Fix typo.

	* malloc/malloc.c (free_check, realloc_check): Don't cast to long for
	%p arg to fprintf, since `void *' is the right type already.

1998-07-25 19:47  Jose M. Moya  <josem@gnu.org>

	* sysdeps/mach/hurd/getcwd.c
	(_hurd_canonicalize_directory_name_internal): Do not loop forever
	for unknown root directories.
	(__getcwd): Return NULL when the current root directory could not
	be reached.

1998-08-11 18:39  Ulrich Drepper  <drepper@cygnus.com>

	* string/strsignal.c (strsignal): Count real-time signals from zero.


See ChangeLog.8 for earlier changes.
