#include <sysdep.h>
#include <tls.h>

--

-- Abuse tls.h macros to derive offsets relative to the thread register.
# define __builtin_thread_pointer()  ((void *) 0)
# define thread_offsetof(mem)	     ((void *) &THREAD_SELF->mem - (void *) 0)

#if TLS_MULTIPLE_THREADS_IN_TCB
MULTIPLE_THREADS_OFFSET		thread_offsetof (header.multiple_threads)
#endif
PID_OFFSET			thread_offsetof (pid)
